# 부록. PC에서 작성 템플릿을 사용하여 카드 작성하기

이 챕터를 열었다는 것은 이미 당신이 아오조라 리님의 문서를 읽고 이해했다는 것을 의미합니다:

* [실시간 프론트엔드 인터페이스 또는 스크립트 작성](https://stagedog.github.io/%E9%9D%92%E7%A9%BA%E8%8E%89/%E5%B7%A5%E5%85%B7%E7%BB%8F%E9%AA%8C/%E5%AE%9E%E6%97%B6%E7%BC%96%E5%86%99%E5%89%8D%E7%AB%AF%E7%95%8C%E9%9D%A2%E6%88%96%E8%84%9A%E6%9C%AC/): AI가 VSCode/Cursor에서 직접 태번 웹페이지를 보고, 보면서 프론트엔드 인터페이스나 스크립트를 제작하도록 허용
* [실시간 캐릭터 카드, 월드인포 또는 프리셋 작성](https://stagedog.github.io/%E9%9D%92%E7%A9%BA%E8%8E%89/%E5%B7%A5%E5%85%B7%E7%BB%8F%E9%AA%8C/%E5%AE%9E%E6%97%B6%E7%BC%96%E5%86%99%E8%A7%92%E8%89%B2%E5%8D%A1%E3%80%81%E4%B8%96%E7%95%8C%E4%B9%A6%E6%88%96%E9%A2%84%E8%AE%BE/): AI가 VSCode/Cursor에서 직접 월드인포나 프리셋을 일괄 수정하도록 허용

## 작성 시작

### 아직 변수 구조 스크립트가 없는 경우

사실 당신은 이미 [작성 템플릿](http://github.com/StageDog/tavern_helper_template)을 사용하여 원클릭으로 카드를 작성할 수 있습니다.

예를 들어, [AI 프로그래밍 어시스턴트](https://stagedog.github.io/%E9%9D%92%E7%A9%BA%E8%8E%89/%E5%B7%A5%E5%85%B7%E7%BB%8F%E9%AA%8C/%E5%AE%9E%E6%97%B6%E7%BC%96%E5%86%99%E5%89%8D%E7%AB%AF%E7%95%8C%E9%9D%A2%E6%88%96%E8%84%9A%E6%9C%AC/%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/)를 열고 다음과 같이 말해보세요:

```
'초기 템플릿/캐릭터 카드'와 '예시/캐릭터 카드 예시'를 참고하여, 'src/샤린' 폴더에 새로운 MVU 캐릭터 카드를 하나 만들어주세요. 이 카드에는 '샤린의 고독감', '인벤토리(아이템창)' 등의 변수가 있어야 하며, 플랫(Flat)한 디자인의 상태창이 포함되어야 합니다.
```

<p align="center">
  <img src="https://vwdygpvfycixugqsgwgn.supabase.co/storage/v1/object/public/post-images/1980dc04-3f08-4581-88cb-b949a10d585b/017f6413-ff1e-44a2-98fe-7392c6a0718e.png" width="400">
</p>

AI 실행이 완료되면, 정상적인 경우 AI가 변수 구조 스크립트, initvar, 변수 업데이트 명령, 변수 목록, 변수 출력 형식, 상태 표시줄 등을 이미 작성해 주었을 것입니다!

!!! tip "팁"
    범용성을 위해, 작성 템플릿에는 인설 템플릿 같은 것이 내장되어 있지 않습니다. [먜먜의 Gemini CLI 전자동 카드 작성 워크플로우](https://discord.com/channels/1291925535324110879/1425536223291904151/1425536223291904151) 등을 참고하여, 직접 VSCode/Cursor에 "월드인포"를 추가하세요 (쉽게 말해 프롬프트를 AI에게 보내거나, [ "전역 월드인포"에 추가하여 항상 AI에게 보내도록](https://stagedog.github.io/%E9%9D%92%E7%A9%BA%E8%8E%89/%E5%B7%A5%E5%85%B7%E7%BB%8F%E9%AA%8C/%E5%AE%9E%E6%97%B6%E7%BC%96%E5%86%99%E5%89%8D%E7%AB%AF%E7%95%8C%E9%9D%A2%E6%88%96%E8%84%9A%E6%9C%AC/#_3) 설정하면 됩니다).

### 이미 변수 구조 스크립트가 있는 경우

변수 구조 스크립트가 없는 경우처럼 작업할 수 있지만, AI와 대화할 때 변수 구조 스크립트를 함께 보내주면 됩니다.

만약 더 수동으로 조작하고 싶다면... `초기 템플릿/캐릭터 카드` 안에 있는 `src 폴더에 새 폴더로 생성`을 수동으로 복사하여 `src` 폴더에 넣고, 원하는 이름으로 변경한 다음, 그 안에 있는 `schema.ts` 파일을 열어 내용을 지우고 자신의 변수 구조 스크립트를 붙여넣으세요. 예:

```typescript
import { registerMvuSchema } from 'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist/util/mvu_zod.js';

export const Schema = z.object({
  호감도: z.coerce.number().transform(value => _.clamp(0, 100));
});

$(() => {
  registerMvuSchema(Schema);
});
```

그 후, 시작 부분의 `import` 줄과 끝부분의 `$(()` `=>` `...)`를 삭제하세요:

```typescript
export const Schema = z.object({
  호감도: z.coerce.number().transform(value => _.clamp(0, 100));
});
```

이렇게 하면, AI가 캐릭터 카드의 변수 구조가 어떤지 알 수 있게 되며, `이름을 변경한 폴더/월드인포/변수` 폴더에서 AI에게 시키거나 직접 initvar 및 기타 변수 프롬프트를 완성할 수 있습니다.

## 실제 사용

이전에 **[<u>실시간 프론트엔드 인터페이스 또는 스크립트 작성</u>](https://stagedog.github.io/%E9%9D%92%E7%A9%BA%E8%8E%89/%E5%B7%A5%E5%85%B7%E7%BB%8F%E9%AA%8C/%E5%AE%9E%E6%97%B6%E7%BC%96%E5%86%99%E5%89%8D%E7%AB%AF%E7%95%8C%E9%9D%A2%E6%88%96%E8%84%9A%E6%9C%AC/)**을 할 때는, 우리는 `src` 폴더 바로 아래에 스크립트나 인터페이스 파일을 새로 만들곤 했습니다.

하지만 MVU 캐릭터 카드를 작성하는 방식은 조금 다릅니다.
파일들을 더 체계적으로 관리(조직)하기 위해, 아오조라 리님이 제작한 초기 템플릿 구조는 다음과 같습니다:

<p align="center">
  <img src="https://vwdygpvfycixugqsgwgn.supabase.co/storage/v1/object/public/post-images/1980dc04-3f08-4581-88cb-b949a10d585b/c2a35d47-ae88-47eb-b439-5448d2d1ab43.png" width="400">
</p>

### 스크립트, 인터페이스 및 월드인포

캐릭터 카드 초기 템플릿 폴더에는 세 개의 폴더가 포함되어 있습니다:

![캐릭터 카드 초기 템플릿 구조](https://stagedog.github.io/_images/%E8%A7%92%E8%89%B2%E5%8D%A1%E5%88%9D%E5%A7%8B%E6%A8%A1%E6%9D%BF%E7%BB%93%E6%9E%84.png)

* `인터페이스`와 `스크립트` 폴더: 이 두 폴더 안에서 [실시간 프론트엔드 인터페이스 또는 스크립트 작성](https://stagedog.github.io/%E9%9D%92%E7%A9%BA%E8%8E%89/%E5%B7%A5%E5%85%B7%E7%BB%8F%E9%AA%8C/%E5%AE%9E%E6%97%B6%E7%BC%96%E5%86%99%E5%89%8D%E7%AB%AF%E7%95%8C%E9%9D%A2%E6%88%96%E8%84%9A%E6%9C%AC/) 처럼 작업할 수 있습니다.
* `월드인포` 폴더: 이 폴더 안에서 [실시간 캐릭터 카드, 월드인포 또는 프리셋 작성](https://stagedog.github.io/%E9%9D%92%E7%A9%BA%E8%8E%89/%E5%B7%A5%E5%85%B7%E7%BB%8F%E9%AA%8C/%E5%AE%9E%E6%97%B6%E7%BC%96%E5%86%99%E8%A7%92%E8%89%B2%E5%8D%A1%E3%80%81%E4%B8%96%E7%95%8C%E4%B9%A6%E6%88%96%E9%A2%84%E8%AE%BE/) 처럼 작업할 수 있습니다.

### 변수 구조 및 변수 구조 스크립트

또한 `schema.ts` 파일이 있는데, 이것은 사실 변수 구조 스크립트의... 주요 부분입니다.

왜 주요 부분이라고 할까요? `schema.ts`는 변수 구조 스크립트의 `export` `const` `Schema` 부분만 포함하고 있기 때문입니다:

```typescript
export const Schema = z.object({
  ...
});
export type Schema = z.output<typeof Schema>;
```

변수 구조 스크립트의 시작 부분인 `import`와 끝부분인 `$(()` `=>` `...)`는 `스크립트/변수 구조/index.ts`에 들어 있습니다:

```typescript
import { registerMvuSchema } from 'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist/util/mvu_zod.js';
import { Schema } from '../../schema';

$(() => {
  registerMvuSchema(Schema);
});
```

원래 '문지기 카드 작성 도우미'가 작성한 변수 구조 스크립트에는 두 가지 기능이 있었습니다:

* `export` `const` `Schema`는 우리 캐릭터 카드의 MVU 변수 구조가 무엇인지 규정합니다.
* 그리고 시작 부분의 `import`와 끝 부분의 `$(()` `=>` `...)`는 이 변수 구조를 실제로 MVU에 등록합니다.

작성 템플릿은 이 두 기능을 분리했습니다:

* `schema.ts`는 우리 캐릭터 카드의 MVU 변수 구조가 무엇인지 규정합니다.
* `스크립트/변수 구조/index.ts`는 이 변수 구조를 실제로 MVU에 등록합니다.

`스크립트/변수 구조/index.ts`는 스크립트이므로 당연히 실시간으로 수정할 수 있습니다. 하지만 왜 `schema.ts`를 분리했을까요? 변수 구조가 변수 구조 스크립트에만 필요한 것이 아니기 때문입니다:

* 상태 표시줄 등 `인터페이스`도 변수를 정상적으로 표시하려면 변수 구조를 알아야 합니다.
* 월드인포의 `[initvar]` 항목도 변수 구조를 기반으로 작성되어야 합니다. 태번에서는 AI가 실수하지 않기를 기도할 수밖에 없었지만, VSCode/Cursor에서는 소프트웨어가 `[initvar]`에 오류가 있는지 검사하게 할 수 있습니다!

즉, 변수 구조 스크립트뿐만 아니라 다른 스크립트, 인터페이스, 심지어 월드인포에서도 `schema.ts`를 필요로 하기 때문에, 아오조라 리는 이를 분리하여 다른 곳에서 직접 사용할 수 있게 했고, 변수 구조 스크립트는 이를 실제로 MVU에 등록하는 역할만 하도록 했습니다.

### `schema.ts`를 사용하여 initvar 작성하기

만약 초기 템플릿을 `src` 폴더에 복사하고 `pnpm` `build` 또는 `pnpm` `watch`를 실행했다면, `schema.ts` 옆에 `schema.json` 파일이 생긴 것을 발견했을 것입니다:

![schema.json 파일](https://stagedog.github.io/_images/schema_json.png)

이 파일은 AI나 우리가 initvar를 손으로 작성할 때 도움을 줄 수 있습니다.

아주 간단합니다! `월드인포/변수/initvar.yaml` 파일을 열면 맨 처음에 `#` `yaml-language-server:` `$schema=../../schema.json`이라는 구문이 있습니다. 이 구문은 이 YAML 파일이 반드시 `schema.json`의 규정(우리의 변수 구조 규정!)을 만족해야 한다는 뜻입니다.

자, 만약 당신이 이미 변수 구조를 생성했다면, 사실 제 설명이 필요 없을 수도 있습니다. `월드인포/변수/initvar.yaml`을 열었을 때 이미 오류를 보았을 테니까요:

![initvar 작성 오류](https://stagedog.github.io/_images/%E7%BC%96%E5%86%99initvar.png)

이 오류는 내 변수 구조에 `세계` 변수가 있어야 한다고 규정되어 있는데, initvar에는 작성하지 않았다는 것을 알려줍니다. 그래서 `세계:` `{}`를 추가하면, 소프트웨어가 또 다른 변수가 빠졌다고 알려줄 것입니다... 이렇게 initvar 파일에 오류가 없어질 때까지 하나하나 채워 넣으면 됩니다! 물론 여전히 AI에게 작성을 맡길 수도 있습니다.

## 추가 사용 설명

더 자세한 사용 설명은 아오조라 리의 문서를 참고하세요:

* [실시간 프론트엔드 인터페이스 또는 스크립트 작성](https://stagedog.github.io/%E9%9D%92%E7%A9%BA%E8%8E%89/%E5%B7%A5%E5%85%B7%E7%BB%8F%E9%AA%8C/%E5%AE%9E%E6%97%B6%E7%BC%96%E5%86%99%E5%89%8D%E7%AB%AF%E7%95%8C%E9%9D%A2%E6%88%96%E8%84%9A%E6%9C%AC/): AI가 VSCode/Cursor에서 직접 태번 웹페이지를 보고, 보면서 프론트엔드 인터페이스나 스크립트를 제작하도록 허용
* [실시간 캐릭터 카드, 월드인포 또는 프리셋 작성](https://stagedog.github.io/%E9%9D%92%E7%A9%BA%E8%8E%89/%E5%B7%A5%E5%85%B7%E7%BB%8F%E9%AA%8C/%E5%AE%9E%E6%97%B6%E7%BC%96%E5%86%99%E8%A7%92%E8%89%B2%E5%8D%A1%E3%80%81%E4%B8%96%E7%95%8C%E4%B9%A6%E6%88%96%E9%A2%84%E8%AE%BE/): AI가 VSCode/Cursor에서 직접 월드인포나 프리셋을 일괄 수정하도록 허용

하지만, 만약 [실시간 프론트엔드 인터페이스 또는 스크립트 작성](https://stagedog.github.io/%E9%9D%92%E7%A9%BA%E8%8E%89/%E5%B7%A5%E5%85%B7%E7%BB%8F%E9%AA%8C/%E5%AE%9E%E6%97%B6%E7%BC%96%E5%86%99%E5%89%8D%E7%AB%AF%E7%95%8C%E9%9D%A2%E6%88%96%E8%84%9A%E6%9C%AC/)과 [실시간 캐릭터 카드, 월드인포 또는 프리셋 작성](https://stagedog.github.io/%E9%9D%92%E7%A9%BA%E8%8E%89/%E5%B7%A5%E5%85%B7%E7%BB%8F%E9%AA%8C/%E5%AE%9E%E6%97%B6%E7%BC%96%E5%86%99%E8%A7%92%E8%89%B2%E5%8D%A1%E3%80%81%E4%B8%96%E7%95%8C%E4%B9%A6%E6%88%96%E9%A2%84%E8%AE%BE/)에 대해 어느 정도 알고 있다면...

* 실시간 프론트엔드 인터페이스 또는 스크립트 작성은 터미널에서 `pnpm` `watch`를 실행합니다;
* 실시간 캐릭터 카드, 월드인포 또는 프리셋 작성은 터미널에서 `node` `tavern_sync.mjs` `watch` `All` `-f`를 실행합니다.

작성 템플릿은 이 두 명령을 통합했으므로, 터미널에서 `pnpm` `watch`만 실행하면 됩니다! (물론 `tavern_sync.yaml` 수정은 잊지 마세요. 그리고 실리태번 쪽에서도 해당 스위치를 켜야 합니다)

