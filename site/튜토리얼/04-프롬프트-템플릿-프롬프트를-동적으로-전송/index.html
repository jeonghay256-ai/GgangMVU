<!DOCTYPE html><html lang="ko" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="MVU Zod 플러그인 사용법을 위한 한국어 가이드">
      
      
      
        <link rel="canonical" href="https://example.github.io/mvu-zod-guide/%ED%8A%9C%ED%86%A0%EB%A6%AC%EC%96%BC/04-%ED%94%84%EB%A1%AC%ED%94%84%ED%8A%B8-%ED%85%9C%ED%94%8C%EB%A6%BF-%ED%94%84%EB%A1%AC%ED%94%84%ED%8A%B8%EB%A5%BC-%EB%8F%99%EC%A0%81%EC%9C%BC%EB%A1%9C-%EC%A0%84%EC%86%A1/">
      
      
        <link rel="prev" href="../03-%EB%B3%80%EC%88%98-%ED%94%84%EB%A1%AC%ED%94%84%ED%8A%B8-AI%EA%B0%80-%EB%B3%80%EC%88%98%EB%A5%BC-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B2%8C-%EB%A7%8C%EB%93%A4%EA%B8%B0/">
      
      
        <link rel="next" href="../05-TavernHelper-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EB%B0%B1%EA%B7%B8%EB%9D%BC%EC%9A%B4%EB%93%9C-%EC%A0%9C%EC%96%B4-%EB%B0%8F-%EB%B3%80%EC%88%98-%ED%99%9C%EC%9A%A9/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>프롬프트 템플릿 - 프롬프트를 동적으로 전송 - MVU Zod 한국어 가이드</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Noto Sans KR";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          콘텐츠로 이동
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="상단/헤더">
    <a href="../.." title="MVU Zod 한국어 가이드" class="md-header__button md-logo" aria-label="MVU Zod 한국어 가이드" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MVU Zod 한국어 가이드
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              프롬프트 템플릿 - 프롬프트를 동적으로 전송
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom" aria-label="다크 모드로 전환" type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="다크 모드로 전환" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom" aria-label="라이트 모드로 전환" type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="라이트 모드로 전환" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="검색" placeholder="검색" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="검색">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="공유" aria-label="공유" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="지우기" aria-label="지우기" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            검색 초기화
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="네비게이션" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="MVU Zod 한국어 가이드" class="md-nav__button md-logo" aria-label="MVU Zod 한국어 가이드" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>

    </a>
    MVU Zod 한국어 가이드
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    홈
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    튜토리얼
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    튜토리얼
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8-%EC%84%A4%EC%B9%98/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    플러그인 설치
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-%EB%B3%80%EC%88%98-%EC%84%A4%EC%A0%95/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    변수 설정
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03-%EB%B3%80%EC%88%98-%ED%94%84%EB%A1%AC%ED%94%84%ED%8A%B8-AI%EA%B0%80-%EB%B3%80%EC%88%98%EB%A5%BC-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B2%8C-%EB%A7%8C%EB%93%A4%EA%B8%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    변수 프롬프트 - AI가 변수를 이해하게 만들기
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    프롬프트 템플릿 - 프롬프트를 동적으로 전송
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    프롬프트 템플릿 - 프롬프트를 동적으로 전송
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="목차">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      목차
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        이론편
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        실전편
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="실전편">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_-_" class="md-nav__link">
    <span class="md-ellipsis">
      
        코드와 텍스트를 구분하는 핵심 문법: &lt;%_ _%&gt;
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#if" class="md-nav__link">
    <span class="md-ellipsis">
      
        if를 이용한 조건 설정
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getvar" class="md-nav__link">
    <span class="md-ellipsis">
      
        getvar()를 사용하여 변수 가져오기
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejs" class="md-nav__link">
    <span class="md-ellipsis">
      
        완전한 EJS 코드 블록 조립하기
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="완전한 EJS 코드 블록 조립하기">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#matchchatmessages-green-light" class="md-nav__link">
    <span class="md-ellipsis">
      
        matchChatMessages()를 이용한 초록불(Green Light) 시뮬레이션
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#else" class="md-nav__link">
    <span class="md-ellipsis">
      
        else를 사용하여 조건이 성립하지 않을 때 프롬프트 전송하기
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="else를 사용하여 조건이 성립하지 않을 때 프롬프트 전송하기">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#else-if" class="md-nav__link">
    <span class="md-ellipsis">
      
        else if를 사용한 다층 로직 구축
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        텍스트가 같은지 판단하는 간단한 예시
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#print" class="md-nav__link">
    <span class="md-ellipsis">
      
        print()를 사용하여 코드 내에서 프롬프트 출력하기
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        전송 결과 검증하기
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ai-ejs" class="md-nav__link">
    <span class="md-ellipsis">
      
        AI에게 EJS 코드 작성 맡기기
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        추가 지식
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="추가 지식">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_" class="md-nav__link">
    <span class="md-ellipsis">
      
        &lt;%= _%&gt;를 사용하여 프롬프트 채우기
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="&lt;%= _%&gt;를 사용하여 프롬프트 채우기">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        사용 예시
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        조건에 맞는 데이터만 골라내기
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. 변수가 존재하면 그 값을 사용하고, 존재하지 않으면 설정한 기본값을 사용합니다.
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#green-light" class="md-nav__link">
    <span class="md-ellipsis">
      
        그린 라이트(Green Light) 항목 활성화하기
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05-TavernHelper-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EB%B0%B1%EA%B7%B8%EB%9D%BC%EC%9A%B4%EB%93%9C-%EC%A0%9C%EC%96%B4-%EB%B0%8F-%EB%B3%80%EC%88%98-%ED%99%9C%EC%9A%A9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TavernHelper 스크립트 - 백그라운드 제어 및 변수 활용
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06-%EC%83%81%ED%83%9C%EB%B0%94/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    상태바
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07-%EB%B3%80%EC%88%98-%EA%B5%AC%EC%A1%B0-%EC%9E%91%EC%84%B1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    변수 구조 작성
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../08-%EA%B8%B0%EC%A1%B4-MVU-%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    기존 MVU 마이그레이션
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../09-%EC%9E%91%EC%84%B1-%ED%85%9C%ED%94%8C%EB%A6%BF-%EC%82%AC%EC%9A%A9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    작성 템플릿 사용
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10-MVU%EA%B0%80-AI%EB%A5%BC-%EB%B0%94%EB%B3%B4%EB%A1%9C-%EB%A7%8C%EB%93%9C%EB%82%98/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MVU가 AI를 바보로 만드나
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../11-%EC%A7%88%EB%AC%B8%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    질문하는 방법
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="목차">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      목차
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        이론편
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        실전편
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="실전편">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_-_" class="md-nav__link">
    <span class="md-ellipsis">
      
        코드와 텍스트를 구분하는 핵심 문법: &lt;%_ _%&gt;
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#if" class="md-nav__link">
    <span class="md-ellipsis">
      
        if를 이용한 조건 설정
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getvar" class="md-nav__link">
    <span class="md-ellipsis">
      
        getvar()를 사용하여 변수 가져오기
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejs" class="md-nav__link">
    <span class="md-ellipsis">
      
        완전한 EJS 코드 블록 조립하기
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="완전한 EJS 코드 블록 조립하기">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#matchchatmessages-green-light" class="md-nav__link">
    <span class="md-ellipsis">
      
        matchChatMessages()를 이용한 초록불(Green Light) 시뮬레이션
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#else" class="md-nav__link">
    <span class="md-ellipsis">
      
        else를 사용하여 조건이 성립하지 않을 때 프롬프트 전송하기
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="else를 사용하여 조건이 성립하지 않을 때 프롬프트 전송하기">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#else-if" class="md-nav__link">
    <span class="md-ellipsis">
      
        else if를 사용한 다층 로직 구축
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        텍스트가 같은지 판단하는 간단한 예시
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#print" class="md-nav__link">
    <span class="md-ellipsis">
      
        print()를 사용하여 코드 내에서 프롬프트 출력하기
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        전송 결과 검증하기
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ai-ejs" class="md-nav__link">
    <span class="md-ellipsis">
      
        AI에게 EJS 코드 작성 맡기기
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        추가 지식
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="추가 지식">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_" class="md-nav__link">
    <span class="md-ellipsis">
      
        &lt;%= _%&gt;를 사용하여 프롬프트 채우기
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="&lt;%= _%&gt;를 사용하여 프롬프트 채우기">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        사용 예시
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        조건에 맞는 데이터만 골라내기
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. 변수가 존재하면 그 값을 사용하고, 존재하지 않으면 설정한 기본값을 사용합니다.
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#green-light" class="md-nav__link">
    <span class="md-ellipsis">
      
        그린 라이트(Green Light) 항목 활성화하기
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="_1">프롬프트 템플릿: 동적 프롬프트 전송<a class="headerlink" href="#_1" title="Permanent link">¶</a></h1>
<h2 id="_2">이론편<a class="headerlink" href="#_2" title="Permanent link">¶</a></h2>
<p>전통적인 캐릭터 카드 작성 방식에서, 우리는 보통 캐릭터의 고정된 설정과 세계관의 배경 스토리를 입력합니다. 더 꼼꼼한 제작자라면 캐릭터가 다양한 단계에서 보여줄 반응까지 구상하곤 합니다. 예를 들어 연애를 시작한 후와 처음 만났을 때의 태도가 정반대라거나, 특정 중대 사건 발생 전후로 세계관이 변하는 식이죠.</p>
<p>하지만 실제 적용 단계에서 이러한 <strong>동적 변화</strong>를 구현하기란 꽤 어렵습니다. 왜냐하면 AI는 매번 상호작용할 때마다 당신이 제공한 <strong>모든 정보</strong>를 읽어들이는데, AI가 그 정보들 사이에서 주의력(Attention)을 어떻게 분배할지는 우리에게 미지수이며, 서로 다른 상황의 설정들이 뒤섞이기 쉽기 때문입니다.</p>
<p><strong>예를 들어 보겠습니다:</strong>
제가 먼저 <strong>100자</strong> 분량의 현대 배경을 설정했고, 그 뒤에 주인공이 이세계로 넘어간(트립) 후의 상황에 맞춰 <strong>300자</strong> 분량의 고대 배경을 보충했다고 가정해 봅시다.
제 의도는 캐릭터가 "<strong>이세계 트립</strong>" 사건을 겪은 <strong>후에만</strong> AI가 고대 배경을 사용하여 묘사하는 것입니다.
하지만 결과는 종종 엉망이 됩니다. AI는 단지 고대 배경의 분량이 더 길다는 이유만으로, 그것을 현재의 주요 설정으로 착각해 버립니다. 결국 전체 스토리 라인이 혼란에 빠지고, 의도대로 전개되지 않게 되죠.</p>
<p>이 문제를 해결하기 위한 아이디어는 사실 매우 직관적입니다.
<strong>AI가 특정 조건하에서는 당장 관련 없는 설정을 "못 보게" 만드는 것입니다.</strong></p>
<p>아래는 전형적인 "<strong>올 블루(All Blue / 상시 활성화)</strong>" 프롬프트 예시입니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>【이곳은 현대 세계이며, 이야기는 중국에서 발생함】   // 배경 혹은 세계관
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>【뤄뤄: 여자, 17세, 고등학생, 치킨을 좋아함】      // 인물 설정
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>【뤄뤄는 user와 친해지기 전에는, 매우 낯을 가림】   // 호감도가 낮을 때의 태도
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>【뤄뤄는 user와 친해진 후에는, 매우 수다쟁이가 됨】 // 호감도가 높을 때의 태도
</code></pre></div>
<p>이렇게 짧은 서술이라면, AI는 뤄뤄가 현재 어떤 상태에 있어야 하는지 아마 구별해 낼 수 있을지도 모릅니다. 하지만 세계관이 장황해지거나 캐릭터가 많아지는 등 설정이 복잡해지면, AI는 종종 정확한 처리에 어려움을 겪습니다.</p>
<p>이때, 우리는 프롬프트 템플릿(Prompt Template) 플러그인을 사용하여 작성을 도울 수 있습니다. 이 플러그인은 우리가 EJS (Embedded JavaScript) 문법을 사용하여 프롬프트를 작성할 수 있게 해주며, 특정 프롬프트를 전송할지 말지를 <strong>현재의 대화 상황(변수)</strong>과 연동시킬 수 있게 해줍니다.</p>
<p><strong>호감도가 낮을 때</strong>, 우리는 오직 다음 내용만 전송합니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>【이곳은 현대 세계이며, 이야기는 중국에서 발생함】
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>【뤄뤄: 여자, 17세, 고등학생, 치킨을 좋아함】
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>【뤄뤄의 현재 호감도는 {{format_message_variable::뤄뤄.호감도}}이며, 따라서 그녀는 매우 낯을 가리는 태도를 보여야 함】 // 호감도가 낮을 때의 태도
</code></pre></div>
<p>반면 <strong>호감도가 계속 상승함</strong>에 따라, 전송되는 프롬프트는 다음과 같이 변합니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>【이곳은 현대 세계이며, 이야기는 중국에서 발생함】
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>【뤄뤄: 여자, 17세, 고등학생, 치킨을 좋아함】
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>【뤄뤄의 현재 호감도는 {{format_message_variable::뤄뤄.호감도}}이며, 따라서 그녀는 수다쟁이처럼 행동해야 함】 // 호감도가 높을 때의 태도
</code></pre></div>
<p>이렇게 하면, AI는 뤄뤄가 지금 이 순간 보여줘야 할 태도만 전달받게 되므로, 두 가지 상반된 상태의 행동을 혼동하지 않게 됩니다.</p>
<p>물론, 위의 예시는 원리를 설명하기 위한 것입니다. 실제 창작 과정에서 플레이어가 캐릭터 성격의 급격한 변화를 눈치채지 못하게 하려면, 우리는 더 <strong>부드러운 전환</strong>을 추구해야 할 수도 있습니다.</p>
<p>따라서, 더 최적화된 설계는 다음과 같을 수 있습니다.</p>
<p></p><div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>【이곳은 현대 세계이며, 이야기는 중국에서 발생함】
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>【뤄뤄: 여자, 17세, 고등학생, 치킨을 좋아함】
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>호감도가 0~40일 때 전송:
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>【뤄뤄의 현재 호감도는 {{format_message_variable::뤄뤄.호감도}}임. 이 단계에서 그녀는 매우 낯을 가리는 태도를 보여야 함. 호감도가 오름에 따라, 그녀는 조금씩 대화에 응하려는 태도를 보일 수 있음】
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>호감도가 40~80일 때 전송:
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>【뤄뤄의 현재 호감도는 {{format_message_variable::뤄뤄.호감도}}임. 이 단계에서 그녀는 비교적 온화한 태도를 보이며, 이미 &lt;user&gt;와 간단한 교류가 가능함. 호감도가 오름에 따라, 그녀는 심지어 먼저 &lt;user&gt;에게 농담을 건넬 수도 있음】
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>호감도가 80~100일 때 전송:
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>【뤄뤄의 현재 호감도는 {{format_message_variable::뤄뤄.호감도}}임. 이 단계에서 그녀는 낯선 사람에게는 여전히 낯을 가릴 수 있지만, 아는 사람, 특히 &lt;user&gt;에게는 반드시 엄청난 수다쟁이처럼 행동할 것임】
</code></pre></div>
이처럼 단계적이고 점진적인 프롬프트는, 이전의 "단칼에 자르듯(一刀切)" 바뀌는 상태 전환보다 효과가 훨씬 자연스럽습니다.<p></p>
<p>하지만 모든 프롬프트는 당신의 실제 필요에 달려 있습니다. 만약 당신이 구현하고 싶은 것이 캐릭터의 동적인 성장이 아니라 세계의 급변(예: 자고 일어났더니 현대에서 고대로 바뀜)이라면, 당신의 프롬프트는 당연히 이런 부드러운 전환이 필요 없을 것입니다.</p>
<p>여기까지 이해하셨다면, 여러분은 EJS를 이용해 선택적으로 프롬프트를 전송하는 핵심 이론을 마스터하신 것입니다.</p>
<h2 id="_3">실전편<a class="headerlink" href="#_3" title="Permanent link">¶</a></h2>
<p>자, 이제 <strong>실전 단계</strong>로 넘어가 봅시다. 우리는 계속해서 <strong>'호감도에 따른 동적 인물 설정'</strong>을 예시로 들어, 호감도 수치에 따라 서로 다른 프롬프트를 전송하는 기능을 직접 구현해 보겠습니다.</p>
<p>시작하기 전에, 긴장을 푸세요. 만약 프로그래밍 기초가 전혀 없다면 아래의 기호들이 조금 낯설게 느껴질 수 있습니다. <strong>지극히 정상입니다!</strong></p>
<p>우리의 목표는 <strong>원리를 이해하는 것</strong>입니다. 원리만 알면 나중에 AI에게 EJS 코드를 짜달라고 시키거나, 더 정확하게 AI를 지휘하여 코드를 작성하게 할 수 있으며, 혹시 AI가 실수하더라도 어디가 틀렸는지 직접 찾아낼 수 있게 됩니다.</p>
<h3 id="_-_">코드와 텍스트를 구분하는 핵심 문법: <code>&lt;%_ _%&gt;</code><a class="headerlink" href="#_-_" title="Permanent link">¶</a></h3>
<p>우선 프롬프트 템플릿 확장의 EJS 문법은 <strong>"코드 명령어"</strong>를 <strong>"일반 텍스트"</strong> 안에 끼워 넣는 기술이라는 점을 이해해야 합니다. 시스템이 어디가 자신에게 내리는 명령(코드)이고, 어디가 AI에게 보낼 스토리(프롬프트)인지 구분하게 하려면 <strong>특수한 표식</strong>이 필요합니다.
그 표식이 바로 <code>&lt;%_ _%&gt;</code>입니다.</p>
<p>이것을 일종의 <strong>"특수한 괄호"</strong>라고 상상해 보세요.
이 괄호로 감싸진 모든 내용은 시스템이 <strong>실행해야 할 코드 명령어</strong>로 이해합니다. 반면, 괄호 밖의 모든 내용은 일반적인 프롬프트 텍스트로 간주하여, 평범한 월드 인포 작성 내용과 똑같이 처리합니다.</p>
<h3 id="if"><code>if</code>를 이용한 조건 설정<a class="headerlink" href="#if" title="Permanent link">¶</a></h3>
<p>EJS에서 우리가 가장 자주 사용하는 명령어는 바로 <code>if</code>입니다.</p>
<p>그 기본 구조는 다음과 같습니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">설정된</span><span class="w"> </span><span class="nx">조건</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">  </span><span class="nx">여기는</span><span class="w"> </span><span class="nx">조건이</span><span class="w"> </span><span class="nx">성립할</span><span class="w"> </span><span class="nx">때만</span><span class="w"> </span><span class="nx">전송될</span><span class="w"> </span><span class="nx">프롬프트</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="p">}</span>
</code></pre></div>
<p>이 코드의 의미는 간단합니다: 만약(if) 괄호 안의 <strong>"조건"</strong>이 성립하면, 중괄호 {} 안의 프롬프트가 전송된다는 뜻입니다.</p>
<p>이제, 이 구조를 EJS의 <strong>"특수한 괄호"</strong>로 감싸보겠습니다. 주의할 점은, if (...) {는 명령어의 시작 부분이고 }는 명령어의 끝부분이므로, 이들을 각각 따로 감싸줘야 한다는 것입니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>&lt;%_ if (설정된 조건) { _%&gt;
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>여기는 조건이 성립할 때만 전송될 프롬프트
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>&lt;%_ } _%&gt;
</code></pre></div>
<p>보세요, 줄 바꿈을 하니 전체 구조가 훨씬 읽기 쉬워졌죠? 이제 다시 MVU 카드의 코드들을 보면, 전보다 조금 더 이해할 수 있을 것 같지 않나요?</p>
<h2 id="getvar"><code>getvar()</code>를 사용하여 변수 가져오기<a class="headerlink" href="#getvar" title="Permanent link">¶</a></h2>
<p>하지만 실제 코드에서 <code>if</code> 뒤의 괄호 안에는 단순히 "설정된 조건"이라는 글자가 들어가는 것이 아니라, <strong>긴 코드</strong>가 들어갑니다.
우리는 이 긴 코드를 작성함으로써 프롬프트와 변수 상황을 연결하고, 그에 따라 프롬프트 전송 여부를 판단하게 됩니다. (예: <strong>캐릭터 호감도가 30보다 큰가?</strong>)</p>
<p><code>`getvar()`</code> 함수가 바로 변수 데이터를 가져와 주는 <strong>전령(메신저)</strong>입니다.
이 함수는 우리가 앞서 설정한 변수(<code>`stat_data`</code>) 속에서, 우리에게 필요한 특정 변수 값을 정확하게 끄집어냅니다.</p>
<p><strong>놀랍게도(사실 별로 안 놀랍지만)</strong>, 이 함수를 사용하여 변수 값을 가져오는 방법은 <code>`{{format_message_variable::변수}}`</code>와 거의 비슷합니다!</p>
<p>우리의 변수 구조가 다음과 같다고 가정해 봅시다.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"><input id="__tabbed_1_2" name="__tabbed_1" type="radio"><input id="__tabbed_1_3" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="__tabbed_1_1">변수 구조 (Schema)</label><label for="__tabbed_1_2">변수 현재값</label><label for="__tabbed_1_3">변수 초기값</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">export</span><span class="w"> </span><span class="kd">const</span><span class="w"> </span><span class="nx">Schema</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">z</span><span class="p">.</span><span class="nx">object</span><span class="p">({</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">  </span><span class="nx">캐릭터</span><span class="o">:</span><span class="w"> </span><span class="kt">z.object</span><span class="p">({</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="nx">뤄뤄</span><span class="o">:</span><span class="w"> </span><span class="kt">z.object</span><span class="p">({</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">      </span><span class="nx">호감도</span><span class="o">:</span><span class="w"> </span><span class="kt">z.coerce.number</span><span class="p">().</span><span class="nx">transform</span><span class="p">(</span><span class="nx">value</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">_</span><span class="p">.</span><span class="nx">clamp</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span><span class="w"> </span><span class="mf">0</span><span class="p">,</span><span class="w"> </span><span class="mf">100</span><span class="p">)),</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">    </span><span class="p">}),</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">  </span><span class="p">}),</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="p">})</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nt">캐릭터</span><span class="p">:</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">  </span><span class="nt">뤄뤄</span><span class="p">:</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">    </span><span class="nt">호감도</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p></p><p align="center">
  <a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="https://vwdygpvfycixugqsgwgn.supabase.co/storage/v1/object/public/post-images/1980dc04-3f08-4581-88cb-b949a10d585b/82c6508e-3e46-4a07-bb28-8112ceaca1f7.jpg" data-desc-position="bottom"><img src="https://vwdygpvfycixugqsgwgn.supabase.co/storage/v1/object/public/post-images/1980dc04-3f08-4581-88cb-b949a10d585b/82c6508e-3e46-4a07-bb28-8112ceaca1f7.jpg" width="600"></a>
</p><p></p>
</div>
</div>
</div>
<p>그럼 다시 생각해 봅시다. 우리가 <code>{{format_message_variable::변수}}</code>를 사용해서 뤄뤄의 호감도 값을 어떻게 가져왔었죠?
정답은 <code>{{format_message_variable::stat_data.캐릭터.뤄뤄.호감도}}</code>입니다.</p>
<p>이에 대응하여, 우리가 <code>getvar()</code>를 사용해 뤄뤄의 호감도를 가져오는 방법은 <code>getvar('stat_data.캐릭터.뤄뤄.호감도')</code>입니다.</p>
<h2 id="ejs">완전한 EJS 코드 블록 조립하기<a class="headerlink" href="#ejs" title="Permanent link">¶</a></h2>
<p>이제 모든 부품을 조립하여, <strong>완전하고 올바른 EJS 코드 블록</strong>이 어떤 모습인지 살펴봅시다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>&lt;%_ if (getvar('stat_data.캐릭터.뤄뤄.호감도') &lt; 30) { _%&gt;
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>여기는 뤄뤄의 호감도가 30 미만일 때, 우리가 AI에게 보여주고자 하는 전용 서술입니다.
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>&lt;%_ } _%&gt;
</code></pre></div>
<h3 id="matchchatmessages-green-light">matchChatMessages()를 이용한 초록불(Green Light) 시뮬레이션<a class="headerlink" href="#matchchatmessages-green-light" title="Permanent link">¶</a></h3>
<p>getvar() 외에도, if 문 안에서 matchChatMessages()를 사용하여 마치 초록불 기능처럼, 본문의 마지막 2개 메시지(마지막 사용자 입력 및 마지막 AI 답장)에서 특정 키워드가 언급되었을 때만 프롬프트를 전송할 수 있습니다. 예를 들면 다음과 같습니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>&lt;%_ if (matchChatMessages(['뤄뤄', '바보'])) { _%&gt;
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>여기는 본문 마지막 2개 메시지(마지막 사용자 입력 및 마지막 AI 답장)에서 "뤄뤄" 또는 "바보"가 언급되었을 때, 우리가 AI에게 보여주고자 하는 전용 서술입니다.
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>&lt;%_ } _%&gt;
</code></pre></div>
<p>물론 더 많은 메시지를 스캔하거나 사용자 입력만 스캔하고 싶을 수도 있습니다. 이 경우 <a href="https://github.com/zonde306/ST-Prompt-Template/blob/main/docs/reference_cn.md?plain=1#L450-L469"><strong><u>matchChatMessages</u></strong></a> 인터페이스에 따라 스캔 방식을 조정할 수 있습니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>&lt;%_ if (matchChatMessages(['뤄뤄', '바보'], { start: -4 })) { _%&gt;
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>여기는 본문 마지막 4개 메시지 중에서 "뤄뤄" 또는 "바보"가 언급되었을 때, 우리가 AI에게 보여주고 싶은 전용 서술입니다.
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>&lt;%_ } _%&gt;
</code></pre></div>
<h2 id="else"><code>else</code>를 사용하여 조건이 성립하지 않을 때 프롬프트 전송하기<a class="headerlink" href="#else" title="Permanent link">¶</a></h2>
<p>이미 <code>if</code>에 대해 배웠으며, 이는 "조건이 성립할 때 프롬프트를 전송"하는 것을 처리할 수 있습니다. 하지만 만약 우리의 로직이 "조건이 성립할 때"뿐만 아니라, <strong>"조건이 성립하지 않을 때 프롬프트를 전송"</strong>해야 하는 상황이라면 어떻게 해야 할까요?</p>
<p>이럴 때는 <code>else</code> (그렇지 않으면)를 사용하여 처리해 봅시다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">설정된_조건</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">  </span><span class="c1">// 여기는 조건이 성립할 때만 전송되는 프롬프트입니다.</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">  </span><span class="c1">// 여기는 조건이 성립하지 않을 때만 전송되는 프롬프트입니다.</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="p">}</span>
</code></pre></div>
<p>이렇게 하면, 우리는 <strong>뤄뤄</strong>의 호감도가 낮을 때와 높을 때의 상황을 구분하여 각각 다른 프롬프트를 전송할 수 있습니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>&lt;%_ if (getvar('stat_data.角色.络络.好感度') &lt; 30) { _%&gt;
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>여기는 뤄뤄의 호감도가 30 미만일 때, 우리가 AI에게 보여주고 싶은 전용 묘사입니다.
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>&lt;%_ } else { _%&gt;
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>여기는 뤄뤄의 호감도가 30 이상일 때, 우리가 AI에게 보여주고 싶은 전용 묘사입니다.
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>&lt;%_ } _%&gt;
</code></pre></div>
<h3 id="else-if">else if를 사용한 다층 로직 구축<a class="headerlink" href="#else-if" title="Permanent link">¶</a></h3>
<p>호감도 변화를 더욱 매끄럽게 만들기 위해, 조건 판단을 추가하여 다양한 구간의 호감도(낮음, 중간, 높음)에 따라 완전히 다른 프롬프트가 적용되도록 할 수 있습니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">설정된_조건1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">  </span><span class="c1">// 여기는 조건 1이 성립할 때만 전송되는 프롬프트입니다</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">설정된_조건2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">  </span><span class="c1">// 여기는 위의 조건 1이 성립하지 않고, 조건 2가 성립할 때만 전송되는 프롬프트입니다</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">  </span><span class="c1">// 여기는 모든 조건이 성립하지 않을 때만 전송되는 프롬프트입니다</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="p">}</span>
</code></pre></div>
<p><code>else if</code>
<strong>"그렇지 않고, 만약……"</strong>으로 이해할 수 있습니다. 앞선 <code>if</code> 조건이 <strong>성립하지 않았을 때</strong>, 새로운 판단 조건을 제공합니다. <code>else if</code>를 원하는 만큼 추가하여 더 복잡한 로직 체인을 구축할 수 있습니다.</p>
<p><code>else</code>
<strong>"그 외의 모든 경우"</strong>로 이해할 수 있습니다. 항상 로직 체인의 맨 마지막에 위치하며, 앞선 모든 <code>if</code>와 <code>else if</code> 조건이 <strong>성립하지 않을 때</strong>, 최종적인 기본(Default) 예비 방안을 제공합니다.</p>
<hr>
<p><strong>뤄뤄(络络)</strong>의 호감도를 통해 더 생생한 예시를 들어보겠습니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="o">&lt;%</span><span class="nx">_</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">getvar</span><span class="p">(</span><span class="s1">'stat_data.角色.络络.好感度'</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">30</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">_</span><span class="o">%&gt;</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="err">【</span><span class="nx">뤄뤄는</span><span class="w"> </span><span class="nx">당신을</span><span class="w"> </span><span class="nx">덤덤하게</span><span class="w"> </span><span class="nx">대하며</span><span class="p">,</span><span class="w"> </span><span class="nx">심지어</span><span class="w"> </span><span class="nx">조금</span><span class="w"> </span><span class="nx">차갑기까지</span><span class="w"> </span><span class="nx">합니다</span><span class="err">】</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="o">&lt;%</span><span class="nx">_</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">getvar</span><span class="p">(</span><span class="s1">'stat_data.角色.络络.好感度'</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">60</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">_</span><span class="o">%&gt;</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="err">【</span><span class="nx">뤄뤄는</span><span class="w"> </span><span class="nx">당신에게</span><span class="w"> </span><span class="nx">호감을</span><span class="w"> </span><span class="nx">가지고</span><span class="w"> </span><span class="nx">있지만</span><span class="p">,</span><span class="w"> </span><span class="nx">여전히</span><span class="w"> </span><span class="nx">어느</span><span class="w"> </span><span class="nx">정도</span><span class="w"> </span><span class="nx">거리를</span><span class="w"> </span><span class="nx">둡니다</span><span class="err">】</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="o">&lt;%</span><span class="nx">_</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">_</span><span class="o">%&gt;</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="err">【</span><span class="nx">뤄뤄는</span><span class="w"> </span><span class="nx">이제</span><span class="w"> </span><span class="nx">당신을</span><span class="w"> </span><span class="nx">매우</span><span class="w"> </span><span class="nx">신뢰하며</span><span class="p">,</span><span class="w"> </span><span class="nx">자신의</span><span class="w"> </span><span class="nx">작은</span><span class="w"> </span><span class="nx">비밀을</span><span class="w"> </span><span class="nx">기꺼이</span><span class="w"> </span><span class="nx">공유하려</span><span class="w"> </span><span class="nx">합니다</span><span class="err">】</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="o">&lt;%</span><span class="nx">_</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="nx">_</span><span class="o">%&gt;</span>
</code></pre></div>
<p>이 코드의 로직은 매우 명확하며, <strong>순서대로 실행</strong>됩니다.</p>
<div class="admonition info">
<p class="admonition-title">로직 실행 순서 상세 분석</p>
<p><strong>1. 먼저 <code>if</code> 검사</strong>
:   프로그램은 먼저 "뤄뤄의 호감도"가 30 미만인지 판단합니다.
:   <strong>조건이 성립하면</strong> (예: 호감도가 20), 첫 번째 묘사를 전송하고 전체 로직 블록을 종료합니다. 뒤에 있는 <code>else if</code>와 <code>else</code>는 <strong>실행되지 않습니다.</strong></p>
<p><strong>2. 그 다음 <code>else if</code> 검사</strong>
:   만약 첫 번째 <code>if</code> 조건이 <strong>성립하지 않으면</strong> (예: 호감도가 45), 프로그램은 이어서 <code>else if</code>의 조건, 즉 호감도가 60 미만인지 판단합니다.
:   <strong>조건이 성립하면</strong>, 두 번째 묘사를 전송하고 로직 블록을 종료합니다.</p>
<p><strong>3. 마지막으로 <code>else</code> 실행</strong>
:   만약 앞선 <code>if</code>와 <code>else if</code> 조건이 <strong>모두 성립하지 않으면</strong> (예: 호감도가 80), 프로그램은 <code>else</code> 부분을 실행하여 마지막 기본 묘사를 전송합니다.</p>
</div>
<p>보시다시피 <code>if</code>, <code>else if</code>, <code>else</code>의 조합을 통해, 우리는 마치 계단을 쌓듯이 층위가 분명하고 논리가 엄격한 상호작용 반응을 구축할 수 있습니다.</p>
<p>텍스트가 같은지 확인하는 또 다른 간단한 예는 다음과 같습니다.</p>
<h3 id="_4">텍스트가 같은지 판단하는 간단한 예시<a class="headerlink" href="#_4" title="Permanent link">¶</a></h3>
<p>이번에는 숫자가 아닌 텍스트(문자열)가 서로 일치하는지 판단하는 예시를 들어보겠습니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="o">&lt;%</span><span class="nx">_</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">getvar</span><span class="p">(</span><span class="s1">'stat_data.事件.天气'</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'맑음'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">_</span><span class="o">%&gt;</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="err">【</span><span class="nx">오늘은</span><span class="w"> </span><span class="nx">햇살이</span><span class="w"> </span><span class="nx">밝아</span><span class="w"> </span><span class="nx">산책하기</span><span class="w"> </span><span class="nx">좋습니다</span><span class="err">】</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="o">&lt;%</span><span class="nx">_</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">getvar</span><span class="p">(</span><span class="s1">'stat_data.事件.天气'</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'비'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">_</span><span class="o">%&gt;</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="err">【</span><span class="nx">밖에</span><span class="w"> </span><span class="nx">비가</span><span class="w"> </span><span class="nx">오니</span><span class="w"> </span><span class="nx">우산을</span><span class="w"> </span><span class="nx">챙기세요</span><span class="err">】</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="o">&lt;%</span><span class="nx">_</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">_</span><span class="o">%&gt;</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="err">【</span><span class="nx">오늘은</span><span class="w"> </span><span class="nx">날씨가</span><span class="w"> </span><span class="nx">그저</span><span class="w"> </span><span class="nx">그렇습니다</span><span class="err">】</span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="o">&lt;%</span><span class="nx">_</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="nx">_</span><span class="o">%&gt;</span>
</code></pre></div>
<p>우리는 <code>===</code>를 사용하여 변수가 특정 값(여기서는 <code>'맑음'</code> 또는 <code>'비'</code>)과 <strong>"같은지"</strong> 판단합니다.</p>
<ul>
<li>만약 날씨가 <strong>"맑음"</strong>이라면, AI는 첫 번째 문장을 보게 됩니다.</li>
<li>그렇지 않고, 만약 날씨가 <strong>"비"</strong>라면, AI는 두 번째 문장을 보게 됩니다.</li>
<li><strong>그 외의 모든 경우</strong> (예: 날씨가 "흐림"이거나 "구름 조금"일 때), AI가 보는 것은 마지막에 있는 "날씨가 그저 그렇습니다"라는 문장이 됩니다.</li>
</ul>
<p>축하합니다! 이제 여러분은 <strong>EJS를 이용해 동적 프롬프트를 작성하는 핵심 로직</strong>을 마스터했습니다. <code>if</code>, <code>else if</code>, 그리고 <code>else</code>의 조합을 통해, 여러분은 이제 풍부하고 다양한 상호작용 로직을 구축할 수 있게 되었습니다.</p>
<h3 id="print"><code>print()</code>를 사용하여 코드 내에서 프롬프트 출력하기<a class="headerlink" href="#print" title="Permanent link">¶</a></h3>
<p>이전의 방식은 다소 지저분해 보였습니다. <code>if</code>, <code>else if</code>, <code>else</code> 구문마다 일일이 <code>&lt;%_ _%&gt;</code> 태그로 감싸야 했고, 정작 프롬프트 텍스트(<code>【오늘은 햇살이...】</code> 등)는 태그 밖에 두어야 했기 때문입니다.
이는 제어 구문은 <strong>코드</strong>이고, 텍스트는 <strong>프롬프트</strong>로 분리되어 처리되었기 때문입니다.</p>
<p>하지만 전체 내용을 하나의 코드 블록으로 처리하고, 코드 내부에서 <code>print()</code> 함수를 사용해 프롬프트를 출력할 수도 있습니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="o">&lt;%</span><span class="nx">_</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">getvar</span><span class="p">(</span><span class="s1">'stat_data.이벤트.날씨'</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'맑음'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="w">  </span><span class="nx">print</span><span class="p">(</span><span class="s1">'【오늘은 햇살이 밝아 산책하기 좋습니다】 '</span><span class="p">);</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">getvar</span><span class="p">(</span><span class="s1">'stat_data.이벤트.날씨'</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'비'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">  </span><span class="nx">print</span><span class="p">(</span><span class="s1">'【밖에 비가 오니 우산을 챙기세요】 '</span><span class="p">);</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="w">  </span><span class="nx">print</span><span class="p">(</span><span class="s1">'【오늘은 날씨가 그저 그렇습니다】 '</span><span class="p">);</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="p">}</span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="nx">_</span><span class="o">%&gt;</span>
</code></pre></div>
<p>이렇게 작성하니 훨씬 깔끔하고 명확해졌습니다!</p>
<p>또한, <code>getwi</code>를 활용하여 다른 <strong>월드 인포</strong> 항목의 내용을 가져와 <code>print</code>로 출력할 수도 있습니다.</p>
<p>가령 우리에게 <code>날씨-맑음</code>, <code>날씨-비</code>, <code>날씨-보통</code>이라는 3개의 추가적인 월드 인포 항목이 있고, 그 안에 각 상황에 맞는 풍부한 프롬프트가 작성되어 있다고 가정해 봅시다.
그렇다면 우리는 <code>로직제어-날씨</code> 항목을 아래와 같이 작성할 수 있습니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="o">&lt;%</span><span class="nx">_</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">getvar</span><span class="p">(</span><span class="s1">'stat_data.이벤트.날씨'</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'맑음'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">  </span><span class="c1">// '날씨-맑음' 항목의 내용을 가져와 출력합니다</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="w">  </span><span class="nx">print</span><span class="p">(</span><span class="k">await</span><span class="w"> </span><span class="nx">getwi</span><span class="p">(</span><span class="s1">'날씨-맑음'</span><span class="p">));</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">getvar</span><span class="p">(</span><span class="s1">'stat_data.이벤트.날씨'</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'비'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w">  </span><span class="c1">// '날씨-비' 항목의 내용을 가져와 출력합니다</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="w">  </span><span class="nx">print</span><span class="p">(</span><span class="k">await</span><span class="w"> </span><span class="nx">getwi</span><span class="p">(</span><span class="s1">'날씨-비'</span><span class="p">));</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="w">  </span><span class="c1">// '날씨-보통' 항목의 내용을 가져와 출력합니다</span>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="w">  </span><span class="nx">print</span><span class="p">(</span><span class="k">await</span><span class="w"> </span><span class="nx">getwi</span><span class="p">(</span><span class="s1">'날씨-보통'</span><span class="p">));</span>
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="p">}</span>
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="nx">_</span><span class="o">%&gt;</span>
</code></pre></div>
<p align="center">
  <a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="https://vwdygpvfycixugqsgwgn.supabase.co/storage/v1/object/public/post-images/1980dc04-3f08-4581-88cb-b949a10d585b/61797bce-c995-4899-931c-7148bd82472e.jpg" data-desc-position="bottom"><img src="https://vwdygpvfycixugqsgwgn.supabase.co/storage/v1/object/public/post-images/1980dc04-3f08-4581-88cb-b949a10d585b/61797bce-c995-4899-931c-7148bd82472e.jpg" width="400"></a>
</p>

<h2 id="_5">전송 결과 검증하기<a class="headerlink" href="#_5" title="Permanent link">¶</a></h2>
<p>SillyTavern 인터페이스에서 제공하는 <strong>[입력창 좌측 하단의 마술봉 $\rightarrow$ 프롬프트 검사기(Prompt Inspector)]</strong>를 통해 결과가 올바르게 전송되었는지 확인할 수 있습니다.</p>
<p>또는 <code>alert(표현식)</code>이나 <code>toastr.info('메시지')</code> 등을 사용하여, 프롬프트 템플릿이 처리되는 중간에 팝업을 띄워 값을 확인할 수도 있습니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="o">&lt;%</span><span class="nx">_</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">getvar</span><span class="p">(</span><span class="s1">'stat_data.이벤트.날씨'</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'맑음'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">_</span><span class="o">%&gt;</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="o">&lt;%</span><span class="nx">_</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="s1">'맑음 프롬프트가 트리거됨'</span><span class="p">);</span><span class="w"> </span><span class="nx">_</span><span class="o">%&gt;</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="err">【</span><span class="nx">오늘은</span><span class="w"> </span><span class="nx">햇살이</span><span class="w"> </span><span class="nx">밝아</span><span class="w"> </span><span class="nx">산책하기</span><span class="w"> </span><span class="nx">좋습니다</span><span class="err">】</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="o">&lt;%</span><span class="nx">_</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">getvar</span><span class="p">(</span><span class="s1">'stat_data.이벤트.날씨'</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'비'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">_</span><span class="o">%&gt;</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="o">&lt;%</span><span class="nx">_</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="s1">'비 프롬프트가 트리거됨'</span><span class="p">);</span><span class="w"> </span><span class="nx">_</span><span class="o">%&gt;</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="err">【</span><span class="nx">밖에</span><span class="w"> </span><span class="nx">비가</span><span class="w"> </span><span class="nx">오니</span><span class="w"> </span><span class="nx">우산을</span><span class="w"> </span><span class="nx">챙기세요</span><span class="err">】</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="o">&lt;%</span><span class="nx">_</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">_</span><span class="o">%&gt;</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="o">&lt;%</span><span class="nx">_</span><span class="w"> </span><span class="c1">// 백틱(`)을 사용해 변수 값을 문자열 안에 포함시킬 수 있습니다 _%&gt;</span>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="o">&lt;%</span><span class="nx">_</span><span class="w"> </span><span class="nx">alert</span><span class="p">(</span><span class="sb">`아무것도 트리거되지 않음, 날씨 변수 값: </span><span class="si">${</span><span class="nx">getvar</span><span class="p">(</span><span class="s1">'stat_data.이벤트.날씨'</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span><span class="w"> </span><span class="nx">_</span><span class="o">%&gt;</span>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="err">【</span><span class="nx">오늘은</span><span class="w"> </span><span class="nx">날씨가</span><span class="w"> </span><span class="nx">그저</span><span class="w"> </span><span class="nx">그렇습니다</span><span class="err">】</span>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a><span class="o">&lt;%</span><span class="nx">_</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="nx">_</span><span class="o">%&gt;</span>
</code></pre></div>
<figure align="center">
  <a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="https://vwdygpvfycixugqsgwgn.supabase.co/storage/v1/object/public/post-images/1980dc04-3f08-4581-88cb-b949a10d585b/b00e2357-486c-4659-acb2-b0587a77a729.jpg" data-desc-position="bottom"><img src="https://vwdygpvfycixugqsgwgn.supabase.co/storage/v1/object/public/post-images/1980dc04-3f08-4581-88cb-b949a10d585b/b00e2357-486c-4659-acb2-b0587a77a729.jpg" width="400"></a>
<br>
<figcaption><em>`else` 상황의 프롬프트가 트리거된 모습</em></figcaption>
</figure>
<p>만약 코딩 경험이 있다면, <code>F12</code>를 눌러 브라우저 개발자 도구를 연 다음, 항목 내용 안에 <code>&lt;%_ debugger; _%&gt;</code>를 입력하여 브라우저의 중단점(breakpoint) 디버깅을 트리거할 수도 있습니다.</p>
<h2 id="ai-ejs">AI에게 EJS 코드 작성 맡기기<a class="headerlink" href="#ai-ejs" title="Permanent link">¶</a></h2>
<p>AI는 Embedded JavaScript 문법을 아주 잘 알고 있으므로, AI에게 대신 작성을 맡길 수 있습니다. 작성 시 <a href="https://n0vi028.github.io/JS-Slash-Runner-Doc/"><strong><u>TavernHelper</u></strong></a>를 사용하여 <code>TavernHelper.getWorldbook</code>과 같은 <strong>SillyTavern 확장 기능(Addon)</strong>의 기능에 접근하거나, <code>getvar</code>와 같은 <a href="https://github.com/zonde306/ST-Prompt-Template/blob/main/docs/reference_cn.md"><strong><u>프롬프트 템플릿의 기능</u></strong></a>에 직접 접근할 수도 있습니다.</p>
<p>AI가 더 쉽게 작성할 수 있도록, <a href="https://stagedog.github.io/%E9%9D%92%E7%A9%BA%E8%8E%89/%E5%B7%A5%E5%85%B7%E7%BB%8F%E9%AA%8C/%E5%AE%9E%E6%97%B6%E7%BC%96%E5%86%99%E5%89%8D%E7%AB%AF%E7%95%8C%E9%9D%A2%E6%88%96%E8%84%9A%E6%9C%AC/"><strong><u>실시간 프론트엔드 인터페이스 또는 스크립트 작성</u></strong></a> 가이드에 따라 Cursor를 설정하고, 확장 기능의 <code>@types</code> 폴더(설정 후 바로 얻을 수 있음)와 프롬프트 템플릿의 <a href="https://github.com/zonde306/ST-Prompt-Template/blob/main/docs/reference_cn.md"><strong><u>reference_cn.md</u></strong></a> 파일을 AI에게 전송하는 것을 권장합니다.</p>
<p>만약 EJS 문법이 정확한지 검사해야 한다면, <strong>WebStorm</strong>을 다운로드하여 사용할 수 있습니다. 이 도구는 <code>.ejs</code>로 끝나는 프롬프트 템플릿 문법 파일에 대해 직접적인 오류 검사(Linting)를 지원합니다.</p>
<p>또는, 칭콩리(青空莉)가 <a href="https://stagedog.github.io/%E9%9D%92%E7%A9%BA%E8%8E%89/%E4%BD%9C%E5%93%81%E9%9B%86/"><strong><u>문지기 캐릭터 카드 작성 도우미</u></strong></a>에서 제공하는 <strong>동적 프롬프트 생성 또는 변환</strong> 기능을 사용하여 AI가 EJS 코드를 작성하게 할 수 있습니다. 이 작성 도우미를 직접 사용하거나, 해당 도구의 프롬프트를 복사하여 사용할 수 있습니다.</p>
<h2 id="_6">추가 지식<a class="headerlink" href="#_6" title="Permanent link">¶</a></h2>
<h3 id="_"><code>&lt;%= _%&gt;</code>를 사용하여 프롬프트 채우기<a class="headerlink" href="#_" title="Permanent link">¶</a></h3>
<p><code>&lt;%_ 코드 _%&gt;</code>를 사용하여 코드 로직을 실행하는 것 외에도, 프롬프트 템플릿은 <code>&lt;%= 표현식 %&gt;</code>을 사용하여 <strong>표현식의 값을 프롬프트에 직접 삽입</strong>하는 기능을 지원합니다.
예를 들어 <code>&lt;%= _.random(0, 10) %&gt;</code>은 0에서 10 사이의 정수를 무작위로 전송합니다.</p>
<p>즉, <code>&lt;%= 표현식 %&gt;</code>은 <strong>매크로</strong>와 유사한 효과를 냅니다.</p>
<hr>
<h4 id="_7">사용 예시<a class="headerlink" href="#_7" title="Permanent link">¶</a></h4>
<p>예를 들어, 프롬프트를 전송하는 시점의 <strong>시간</strong>을 가져와 AI에게 보낼 수 있습니다.
(단순히 기능 예시이며, 구체적인 코드는 AI에게 작성을 맡기면 됩니다)</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio"><input id="__tabbed_2_2" name="__tabbed_2" type="radio"><div class="tabbed-labels"><label for="__tabbed_2_1">작성한 프롬프트</label><label for="__tabbed_2_2">AI에게 전송되는 결과</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="o">&lt;%=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Date</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()).</span><span class="nx">toISOString</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>2025-12-08T15:26:38.314Z
</code></pre></div>
</div>
</div>
</div>
<p>또 다른 예로, <strong>배열에서 무작위로 하나의 요소</strong>를 가져와 AI에게 보낼 수 있습니다.
(단순히 기능 예시이며, 구체적인 코드는 AI에게 작성을 맡기면 됩니다)</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio"><input id="__tabbed_3_2" name="__tabbed_3" type="radio"><div class="tabbed-labels"><label for="__tabbed_3_1">작성한 프롬프트</label><label for="__tabbed_3_2">AI에게 전송되는 결과</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="o">&lt;%=</span><span class="w"> </span><span class="nx">_</span><span class="p">.</span><span class="nx">sample</span><span class="p">([</span><span class="s1">'일'</span><span class="p">,</span><span class="w"> </span><span class="s1">'이'</span><span class="p">,</span><span class="w"> </span><span class="s1">'삼'</span><span class="p">])</span><span class="w"> </span><span class="o">%&gt;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<p><code>일</code> 또는 <code>이</code> 또는 <code>삼</code></p>
</div>
</div>
</div>
<p>또 다른 예로, 변수의 표시 형식을 조정할 수도 있습니다. (단순히 기능 예시이며, 구체적인 코드는 AI에게 작성을 맡기면 됩니다)</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio"><input id="__tabbed_4_2" name="__tabbed_4" type="radio"><div class="tabbed-labels"><label for="__tabbed_4_1">한 줄 JSON으로 표시</label><label for="__tabbed_4_2">YAML로 표시</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="o">&lt;%=</span><span class="w"> </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">getvar</span><span class="p">(</span><span class="s1">'stat_data'</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;</span>
</code></pre></div>
<p><strong>AI에게 전송되는 결과:</strong>
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="p">{</span><span class="nt">"캐릭터"</span><span class="p">:{</span><span class="nt">"뤄뤄"</span><span class="p">:{</span><span class="nt">"호감도"</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span><span class="nt">"기분"</span><span class="p">:</span><span class="s2">"즐거움"</span><span class="p">},</span><span class="nt">"칭콩리"</span><span class="p">:{</span><span class="nt">"호감도"</span><span class="p">:</span><span class="mi">60</span><span class="p">,</span><span class="nt">"기분"</span><span class="p">:</span><span class="s2">"우울함"</span><span class="p">}},</span><span class="nt">"월드"</span><span class="p">:{</span><span class="nt">"날짜"</span><span class="p">:</span><span class="s2">"2025-07-26"</span><span class="p">,</span><span class="nt">"시간"</span><span class="p">:</span><span class="s2">"21:00"</span><span class="p">}}</span>
</code></pre></div><p></p>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="o">&lt;%=</span><span class="w"> </span><span class="nx">YAML</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">getvar</span><span class="p">(</span><span class="s1">'stat_data'</span><span class="p">),</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">blockQuote</span><span class="o">:</span><span class="w"> </span><span class="s1">'literal'</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="o">%&gt;</span>
</code></pre></div>
<p><strong>AI에게 전송되는 결과:</strong>
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="nt">캐릭터</span><span class="p">:</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="w">  </span><span class="nt">뤄뤄</span><span class="p">:</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="w">    </span><span class="nt">호감도</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="w">    </span><span class="nt">기분</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">즐거움</span>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="w">  </span><span class="nt">칭콩리</span><span class="p">:</span>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="w">    </span><span class="nt">호감도</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="w">    </span><span class="nt">기분</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">우울함</span>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="nt">월드</span><span class="p">:</span>
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a><span class="w">  </span><span class="nt">날짜</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2025-07-26</span>
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a><span class="w">  </span><span class="nt">시간</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">21:00</span>
</code></pre></div><p></p>
</div>
</div>
</div>
<h3 id="_8">조건에 맞는 데이터만 골라내기<a class="headerlink" href="#_8" title="Permanent link">¶</a></h3>
<p>또는, <code>stat_data.캐릭터</code> 안에 여러 명의 캐릭터가 저장되어 있다고 가정할 때, 다음과 같이 <strong>호감도가 30 미만인 모든 캐릭터</strong>만 나열할 수도 있습니다.
(단순히 기능 예시이며, 구체적인 코드는 AI에게 작성을 맡기면 됩니다)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="o">**</span><span class="nx">현재</span><span class="w"> </span><span class="nx">호감도가</span><span class="w"> </span><span class="mf">30</span><span class="w"> </span><span class="nx">미만인</span><span class="w"> </span><span class="nx">인물</span><span class="o">:**</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="o">&lt;%=</span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">  </span><span class="nb">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="w">    </span><span class="nx">_</span><span class="p">(</span><span class="nx">getvar</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span><span class="w"> </span><span class="s1">'stat_data.캐릭터'</span><span class="p">))</span>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">      </span><span class="c1">// 캐릭터의 호감도가 30 미만인 경우만 골라냅니다</span>
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="w">      </span><span class="p">.</span><span class="nx">pickBy</span><span class="p">(</span><span class="nx">캐릭터</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">캐릭터</span><span class="p">.</span><span class="nx">호감도</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">30</span><span class="p">)</span>
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="w">      </span><span class="p">.</span><span class="nx">values</span><span class="p">()</span>
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="w">      </span><span class="p">.</span><span class="nx">value</span><span class="p">(),</span>
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="w">  </span><span class="p">)</span>
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="o">%&gt;</span>
<a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a>
<a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a><span class="err">##</span><span class="w"> </span><span class="nx">변수가</span><span class="w"> </span><span class="nx">존재하지</span><span class="w"> </span><span class="nx">않을</span><span class="w"> </span><span class="nx">때</span><span class="w"> </span><span class="nx">처리하는</span><span class="w"> </span><span class="nx">법</span>
<a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a>
<a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="nx">MVU</span><span class="w"> </span><span class="nx">ZOD는</span><span class="w"> </span><span class="nx">게임</span><span class="w"> </span><span class="nx">플레이</span><span class="w"> </span><span class="nx">도중에</span><span class="w"> </span><span class="nx">변수를</span><span class="w"> </span><span class="nx">삽입할</span><span class="w"> </span><span class="nx">수</span><span class="w"> </span><span class="nx">있습니다</span><span class="p">.</span><span class="w"> </span><span class="nx">예를</span><span class="w"> </span><span class="nx">들어</span><span class="p">,</span><span class="w"> </span><span class="o">**</span><span class="nx">소지품</span><span class="p">(</span><span class="nx">Inventory</span><span class="p">)</span><span class="o">**</span><span class="nx">에</span><span class="w"> </span><span class="nx">원래</span><span class="w"> </span><span class="o">**</span><span class="nx">껌</span><span class="o">**</span><span class="nx">이</span><span class="w"> </span><span class="nx">없었지만</span><span class="p">,</span><span class="w"> </span><span class="nx">게임이</span><span class="w"> </span><span class="nx">진행됨에</span><span class="w"> </span><span class="nx">따라</span><span class="w"> </span><span class="nx">AI가</span><span class="w"> </span><span class="o">**</span><span class="nx">소지품</span><span class="o">**</span><span class="nx">에</span><span class="w"> </span><span class="o">**</span><span class="nx">껌</span><span class="o">**</span><span class="nx">을</span><span class="w"> </span><span class="nx">추가하는</span><span class="w"> </span><span class="nx">식입니다</span><span class="p">.</span>
<a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a>
<a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a><span class="nx">그렇다면</span><span class="w"> </span><span class="nx">EJS는</span><span class="w"> </span><span class="nx">변수가</span><span class="w"> </span><span class="nx">존재하지</span><span class="w"> </span><span class="nx">않는</span><span class="w"> </span><span class="nx">상황을</span><span class="w"> </span><span class="nx">어떻게</span><span class="w"> </span><span class="nx">처리해야</span><span class="w"> </span><span class="nx">할까요</span><span class="o">?</span><span class="w"> </span><span class="nx">다음과</span><span class="w"> </span><span class="nx">같은</span><span class="w"> </span><span class="nx">방법을</span><span class="w"> </span><span class="nx">사용할</span><span class="w"> </span><span class="nx">수</span><span class="w"> </span><span class="nx">있습니다</span><span class="p">.</span>
<a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a>
<a id="__codelineno-26-18" name="__codelineno-26-18" href="#__codelineno-26-18"></a><span class="err">###</span><span class="w"> </span><span class="mf">1.</span><span class="w"> </span><span class="nx">변수의</span><span class="w"> </span><span class="nx">존재</span><span class="w"> </span><span class="nx">여부</span><span class="w"> </span><span class="nx">판단하기</span>
<a id="__codelineno-26-19" name="__codelineno-26-19" href="#__codelineno-26-19"></a>
<a id="__codelineno-26-20" name="__codelineno-26-20" href="#__codelineno-26-20"></a><span class="sb">`undefined`</span><span class="nx">가</span><span class="w"> </span><span class="nx">아닌지</span><span class="w"> </span><span class="nx">확인하여</span><span class="w"> </span><span class="nx">변수가</span><span class="w"> </span><span class="nx">존재하는지</span><span class="w"> </span><span class="nx">판단합니다</span><span class="p">.</span>
<a id="__codelineno-26-21" name="__codelineno-26-21" href="#__codelineno-26-21"></a>
<a id="__codelineno-26-22" name="__codelineno-26-22" href="#__codelineno-26-22"></a><span class="sb">```javascript</span>
<a id="__codelineno-26-23" name="__codelineno-26-23" href="#__codelineno-26-23"></a><span class="sb">getvar('stat_data.캐릭터.뤄뤄.호감도') !== undefined</span>
</code></pre></div>
<h3 id="2">2. 변수가 존재하면 그 값을 사용하고, 존재하지 않으면 설정한 기본값을 사용합니다.<a class="headerlink" href="#2" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>// 변수가 없으면 0을 반환합니다
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>getvar('stat_data.캐릭터.뤄뤄.호감도', { defaults: 0 })
</code></pre></div>
<p>AI가 변수를 업데이트하지 못하게 하거나 숨기기
때때로 캐릭터 카드의 시작 분기(오프닝)에 따라 차이가 클 수 있습니다. 예를 들어 시작 1은 마법 세계이고, 시작 2는 과학 기술 세계인 경우입니다. 플레이어가 시작 1을 선택했다면, 월드 인포는 마법 세계 관련 항목만 활성화해야 하고, 과학 기술 세계 관련 항목은 영원히 활성화되지 않아야 합니다.</p>
<p><strong>전체 방식</strong>이든 <strong>증분 방식</strong>이든, 우리는 시작 분기에 따라 서로 다른 변수 초기값을 설정할 수 있습니다.</p>
<p>그리고 프롬프트 템플릿의 &lt;%<em> if (...) </em>%&gt;를 통해 변수 값에 따라 해당 분기에 맞는 프롬프트만 전송할 수 있습니다.</p>
<p>이렇게 하면, 우리는 확실히 시작 1에서는 마법 세계 월드 인포만, 시작 2에서는 과학 기술 세계 월드 인포만 활성화할 수 있습니다.</p>
<p>하지만, AI가 이를 수정하는 것을 완전히 막을 수는 없습니다.</p>
<p><strong>"AI의 돌발 행동 가능성"</strong></p>
<ul>
<li>변수 목록의 <code>{{format_message_variable::stat_data}}</code>를 통해, AI는 <code>월드.타입</code> 변수의 값을 알 수 있게 됩니다.</li>
<li>변수 업데이트 규칙에 "<code>월드.타입</code> 변수는 절대 변하지 않는다"고 명시하더라도, AI가 멍청하게 굴어서 이를 업데이트해버릴 가능성이 있습니다.</li>
</ul>
<p>따라서 MVU ZOD는 변수명 앞에 <strong>_ (언더바)</strong>를 붙여서, 이 변수가 AI에 의해 업데이트될 수 없음을 표시하는 기능을 제공합니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>월드:
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>  _타입: 마법
</code></pre></div>
<p>이렇게 하면 AI가 해당 변수에 대한 업데이트 명령을 출력하더라도, 실제로 변수가 업데이트되지 않습니다.</p>
<p>변수 숨기기 ($)
조금 더 생각해보면, 여기서 월드.타입 변수는 어떤 프롬프트를 보낼지 선택하는 용도 외에는 다른 용도가 없으므로, AI가 굳이 이 변수를 알 필요조차 없습니다!</p>
<p>SillyTavern 확장 기능(TavernHelper)은 변수명 앞에 <strong>$ (달러 기호)</strong>를 붙여서, 이 변수가 AI에게 보이지 않도록 설정할 수 있습니다. 이렇게 하면 {{format_message_variable::stat_data}}가 출력될 때 해당 변수는 표시되지 않습니다.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:1"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio"><div class="tabbed-labels"><label for="__tabbed_5_1">변수 구조 (실제 데이터)</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="nt">월드</span><span class="p">:</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="w">  </span><span class="nt">$타입</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">마법</span>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="w">  </span><span class="nt">현재시간</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2025-12-08 15:00:00</span>
</code></pre></div>
<div class="tabbed-set tabbed-alternate" data-tabs="6:1"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio"><div class="tabbed-labels"><label for="__tabbed_6_1">전송 결과 (AI가 보는 것)</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<p><code>{{format_message_variable::stat_data}}</code>의 결과:
</p><div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="nt">월드</span><span class="p">:</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="w">  </span><span class="nt">현재시간</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2025-12-08 15:00:00</span>
</code></pre></div><p></p>
<p>이에 따라, 변수 업데이트 규칙에서 월드.$타입에 대응하는 규칙을 삭제하면, AI는 월드.$타입이라는 변수가 존재하는지조차 모르기 때문에 이를 업데이트하려고 시도하지도 않을 것입니다.</p>
<p>물론, 프롬프트를 통해 AI가 강제로 업데이트하게 만들 수는 있습니다. 정리하자면 다음과 같습니다.</p>
<div class="admonition summary">
<p class="admonition-title">변수 접두사 규칙 요약</p>
<ul>
<li><strong>_변수 (언더바)</strong>: AI가 볼 수 있지만, 업데이트할 수는 없습니다.</li>
<li><strong>$변수 (달러)</strong>: AI가 볼 수 없지만, (강제하면) 업데이트할 수는 있습니다.</li>
</ul>
</div>
<h2 id="green-light">그린 라이트(Green Light) 항목 활성화하기<a class="headerlink" href="#green-light" title="Permanent link">¶</a></h2>
<p>기본적으로 프롬프트 템플릿은 <strong>월드 인포가 활성화된 후</strong>에 내용을 처리합니다. 즉, 월드 인포가 활성화되는 과정(키워드 매칭 등)에서 SillyTavern이 보는 내용은 다음과 같은 코드 그 자체입니다.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="o">&lt;%</span><span class="nx">_</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">getvar</span><span class="p">(</span><span class="s1">'stat_data.이벤트.날씨'</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'맑음'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">_</span><span class="o">%&gt;</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="err">【</span><span class="nx">오늘은</span><span class="w"> </span><span class="nx">햇살이</span><span class="w"> </span><span class="nx">밝아</span><span class="w"> </span><span class="nx">산책하기</span><span class="w"> </span><span class="nx">좋습니다</span><span class="err">】</span>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="o">&lt;%</span><span class="nx">_</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">getvar</span><span class="p">(</span><span class="s1">'stat_data.이벤트.날씨'</span><span class="p">)</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">'비'</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">_</span><span class="o">%&gt;</span>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="err">【</span><span class="nx">밖에</span><span class="w"> </span><span class="nx">비가</span><span class="w"> </span><span class="nx">오니</span><span class="w"> </span><span class="nx">우산을</span><span class="w"> </span><span class="nx">챙기세요</span><span class="err">】</span>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="o">&lt;%</span><span class="nx">_</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">_</span><span class="o">%&gt;</span>
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a><span class="err">【</span><span class="nx">오늘은</span><span class="w"> </span><span class="nx">날씨가</span><span class="w"> </span><span class="nx">그저</span><span class="w"> </span><span class="nx">그렇습니다</span><span class="err">】</span>
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="o">&lt;%</span><span class="nx">_</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="nx">_</span><span class="o">%&gt;</span>
</code></pre></div>
<p>SillyTavern은 이것을 【오늘은 햇살이...】, 【밖에 비가...】, 【오늘은 날씨가...】 중 하나로 인식하는 것이 아닙니다.</p>
<p>그렇다면 &lt;%<em> if (...) </em>%&gt;를 사용해서는 <strong>그린 라이트(항목 활성화)</strong>를 할 수 없다는 뜻일까요?</p>
<p>SillyTavern 1.13.4 이상 버전의 경우, 항목 내용의 맨 첫 줄에 @@preprocessing을 추가하여 프롬프트 템플릿이 월드 인포 활성화 전에 이 항목을 처리하도록 요청할 수 있습니다.</p>
<p>이렇게 하면, 이 항목의 내용은 활성화 판단 단계 이전에 이미 상황에 맞는 텍스트(예: 【오늘은 햇살이...】)로 변환됩니다.</p>
<p>따라서 그린 라이트가 올바르게 작동하며, Sticky(고정), Cooldown(쿨타임) 등의 시효성 기능도 정상적으로 지원하게 됩니다.</p>
<p>쉽게 말해, 프롬프트 템플릿이 월드 인포 활성화 전에 처리를 미리 끝마쳤으므로, 활성화 시점에서는 정상적인 일반 월드 인포 항목으로 취급되는 것입니다.</p>
<p>만약 구버전 SillyTavern에서도 이를 지원하게 하려면, 계속 읽어주세요. 다음 장에서 TavernHelper 스크립트를 사용하여 구현하는 방법을 소개합니다.</p>
<div class="admonition tip">
<p class="admonition-title">공식 문서 참고</p>
<p>더 많은 프롬프트 템플릿 기능은 <strong><a href="https://github.com/zonde306/ST-Prompt-Template/blob/main/README_CN.md"><u>공식 문서</u></a></strong>를 참고하세요!</p>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  맨위로
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.indexes", "navigation.top", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.code.annotate", "toc.follow"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "\ud074\ub9bd\ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac\ub428", "clipboard.copy": "\ud074\ub9bd\ubcf4\ub4dc\ub85c \ubcf5\uc0ac", "search.result.more.one": "\uc774 \ubb38\uc11c\uc5d0\uc11c 1\uac1c\uc758 \uac80\uc0c9 \uacb0\uacfc \ub354 \ubcf4\uae30", "search.result.more.other": "\uc774 \ubb38\uc11c\uc5d0\uc11c #\uac1c\uc758 \uac80\uc0c9 \uacb0\uacfc \ub354 \ubcf4\uae30", "search.result.none": "\uac80\uc0c9\uc5b4\uc640 \uc77c\uce58\ud558\ub294 \ubb38\uc11c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4", "search.result.one": "1\uac1c\uc758 \uc77c\uce58\ud558\ub294 \ubb38\uc11c", "search.result.other": "#\uac1c\uc758 \uc77c\uce58\ud558\ub294 \ubb38\uc11c", "search.result.placeholder": "\uac80\uc0c9\uc5b4\ub97c \uc785\ub825\ud558\uc138\uc694", "search.result.term.missing": "\ud3ec\ud568\ub418\uc9c0 \uc54a\uc740 \uac80\uc0c9\uc5b4", "select.version": "\ubc84\uc804 \uc120\ud0dd"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>